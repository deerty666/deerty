<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>منيو ديرتي</title>
    <link rel="stylesheet" href="styles1.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

    <!-- رأس الصفحة -->
    <header class="restaurant-header">
        <img src="images/logo.png" alt="شعار المطعم" class="logo">
        <h1>مطعم ديرتي</h1>
        <p>للطلب اتصل على <a href="tel:0500000000">0500000000</a></p>
    </header>

    <!-- قائمة الأقسام -->
    <nav class="categories">
        <a href="#chicken">قسم الدجاج</a>
        <a href="#meat">قسم اللحم</a>
        <a href="#drinks">المشروبات</a>
    </nav>

    <!-- الأصناف -->
    <section class="menu-items">

        <!-- قسم الدجاج -->
        <div id="chicken" class="category-section">
            <h2>قسم الدجاج</h2>
            <div class="menu-item">
                <img src="images/chicken1.jpg" alt="دجاج شواية">
                <h3>دجاج شواية</h3>
                <span class="price" data-price="18">18 ريال</span>
                <button class="add-to-cart-btn" onclick="openOptions('chicken','دجاج شواية',18)">إضافة</button>
            </div>
        </div>

        <!-- قسم اللحم -->
        <div id="meat" class="category-section">
            <h2>قسم اللحم</h2>
            <div class="menu-item">
                <img src="images/meat1.jpg" alt="مندي لحم">
                <h3>مندي لحم</h3>
                <span class="price" data-price="45">45 ريال</span>
                <button class="add-to-cart-btn" onclick="openOptions('meat','مندي لحم',45)">إضافة</button>
            </div>
        </div>

        <!-- قسم المشروبات -->
        <div id="drinks" class="category-section">
            <h2>المشروبات</h2>
            <div class="menu-item">
                <img src="images/pepsi.jpg" alt="بيبسي">
                <h3>بيبسي</h3>
                <span class="price" data-price="3">3 ريال</span>
                <button class="add-to-cart-btn" onclick="addToCartDirect('بيبسي',3)">إضافة</button>
            </div>
        </div>

    </section>

    <!-- نافذة اختيار الإضافات -->
    <div class="overlay" id="item-options-overlay">
        <div class="popup">
            <h2 id="popup-item-name">اختر الإضافات</h2>
            <input type="hidden" id="current-item-type">
            <div class="options-group" id="size-options-group">
                <h3>اختر الحجم:</h3>
                <label><input type="radio" name="size" value="نص" data-price-modifier="0" checked> نصف</label>
                <label><input type="radio" name="size" value="كامل" data-price-modifier="1"> كامل</label>
            </div>

            <div class="options-group" id="rice-options-group">
                <h3>اختر نوع الأرز:</h3>
                <label>
                    <input type="radio" name="rice" value="شعبي"
                           data-price-modifier-half="0"
                           data-price-modifier-full="0" checked>
                    رز شعبي (بدون زيادة)
                </label>

                <label>
                    <input type="radio" name="rice" value="بشاور"
                           data-price-modifier-half="1"
                           data-price-modifier-full="4">
                    رز بشاور (+1 ريال نصف / +4 ريال كامل)
                </label>

                <label>
                    <input type="radio" name="rice" value="مندي"
                           data-price-modifier-half="1"
                           data-price-modifier-full="4">
                    رز مندي (+1 ريال نصف / +4 ريال كامل)
                </label>
            </div>

            <div class="popup-buttons">
                <button onclick="confirmAddToCart()">إضافة للسلة</button>
                <button onclick="closeOptions()">إلغاء</button>
            </div>
        </div>
    </div>

    <!-- نافذة السلة -->
    <div class="overlay" id="cart-overlay">
        <div class="popup">
            <h2>سلة الطلبات</h2>
            <div id="cart-items"></div>
            <p id="cart-total">الإجمالي: 0 ريال</p>
            <div class="popup-buttons">
                <button onclick="sendToWhatsApp()">تأكيد الطلب عبر واتساب</button>
                <button onclick="closeCart()">إغلاق</button>
            </div>
        </div>
    </div>

    <button class="cart-btn" onclick="openCart()">
        <i class="fas fa-shopping-cart"></i> السلة
        <span id="cart-count">0</span>
    </button>

    <script>
        let cart = [];
        let currentItem = {};

        function openOptions(type, name, price) {
            document.getElementById("item-options-overlay").style.display = "flex";
            document.getElementById("popup-item-name").textContent = name;
            document.getElementById("current-item-type").value = type;
            currentItem = { type, name, basePrice: price };
        }

        function closeOptions() {
            document.getElementById("item-options-overlay").style.display = "none";
        }

        function confirmAddToCart() {
            const size = document.querySelector('input[name="size"]:checked').value;
            const rice = document.querySelector('input[name="rice"]:checked').value;
            let finalPrice = currentItem.basePrice;

            const riceOption = document.querySelector('input[name="rice"]:checked');
            if (size === "نص") {
                finalPrice += parseFloat(riceOption.dataset.priceModifierHalf);
            } else {
                finalPrice += parseFloat(riceOption.dataset.priceModifierFull);
            }

            cart.push({ ...currentItem, size, rice, price: finalPrice });
            updateCart();
            closeOptions();
        }

        function addToCartDirect(name, price) {
            cart.push({ name, price });
            updateCart();
        }

        function updateCart() {
            const cartContainer = document.getElementById("cart-items");
            const totalElement = document.getElementById("cart-total");
            const countElement = document.getElementById("cart-count");
            cartContainer.innerHTML = "";
            let total = 0;

            cart.forEach((item, index) => {
                total += item.price;
                const div = document.createElement("div");
                div.classList.add("cart-item");
                div.innerHTML = `
                    <p>${item.name} (${item.size || ""} - ${item.rice || ""}) - ${item.price} ريال</p>
                    <button onclick="removeFromCart(${index})">حذف</button>
                `;
                cartContainer.appendChild(div);
            });

            totalElement.textContent = `الإجمالي: ${total} ريال`;
            countElement.textContent = cart.length;
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCart();
        }

        function openCart() {
            document.getElementById("cart-overlay").style.display = "flex";
        }

        function closeCart() {
            document.getElementById("cart-overlay").style.display = "none";
        }

        function sendToWhatsApp() {
            if (cart.length === 0) return alert("السلة فارغة!");
            let message = "طلب جديد من موقع ديرتي:%0A";
            cart.forEach(item => {
                message += `- ${item.name} (${item.size || ""} - ${item.rice || ""}) - ${item.price} ريال%0A`;
            });
            const total = document.getElementById("cart-total").textContent;
            message += `%0A${total}`;
            window.open(`https://wa.me/966500000000?text=${message}`, "_blank");
        }
    </script>
</body>
</html>
